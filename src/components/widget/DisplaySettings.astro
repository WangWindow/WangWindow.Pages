---
import I18nKey from "@i18n/i18nKey";
import { i18n } from "@i18n/translation";
---

<div
    id="display-setting"
    class="float-panel float-panel-closed absolute transition-all w-80 right-4 px-4 py-4"
>
    <div class="flex flex-row gap-2 mb-3 items-center justify-between">
        <div
            class="flex gap-2 font-bold text-lg text-neutral-900 dark:text-neutral-100 transition relative ml-3"
        >
            {i18n(I18nKey.themeColor)}
        </div>
        <div class="flex gap-1">
            <div
                id="hueValue"
                class="transition bg-(--btn-regular-bg) w-10 h-7 rounded-md flex justify-center font-bold text-sm items-center text-(--btn-content)"
            >
                0
            </div>
        </div>
    </div>
    <div
        class="w-full h-6 px-1 bg-[oklch(0.80_0.10_0)] dark:bg-[oklch(0.70_0.10_0)] rounded select-none"
    >
        <input
            aria-label={i18n(I18nKey.themeColor)}
            type="range"
            id="colorSlider"
            min="0"
            max="360"
            step="5"
            value="0"
            class="slider"
            style="width: 100%"
        />
    </div>
</div>

<script type="module">
    const slider = document.getElementById("colorSlider");
    const display = document.getElementById("hueValue");
    function setHue(v) {
        document.documentElement.style.setProperty("--hue", v);
        localStorage.setItem("site:hue", String(v));
        if (display) display.textContent = String(v);
    }

    function init() {
        const stored = localStorage.getItem("site:hue");
        const v = stored !== null ? Number(stored) : 250;
        setHue(v);
        slider?.addEventListener("input", (e) => setHue(e.target.value));
    }
    init();
</script>
